<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<th:block th:fragment="page">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="title" th:content="${title}"/>
        <meta name="description" th:content="#{info.app-description}"/>
        <meta name="keywords" th:content="#{info.app-description}"/>
        <meta th:name="_csrf" th:content="${_csrf.token}"/>
        <meta th:name="_csrf_header" th:content="${_csrf.headerName}"/>

        <title th:text="'PicNest - ' + ${title}"></title>
        <link rel="apple-touch-icon" sizes="180x180" th:href="@{/images/icon/picnest-apple-touch-icon.png}" />
        <link rel="icon" type="image/png" sizes="32x32" th:href="@{/images/icon/favicon.png}" />
        <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.3.3/css/bootstrap.min.css}" />
        <link rel="stylesheet" th:href="@{/webjars/font-awesome/6.5.2/css/all.min.css}" />
        <link rel="stylesheet" th:href="@{/webjars/bootstrap-icons/1.11.3/font/bootstrap-icons.css}" />
        <link rel="stylesheet" th:href="@{/webjars/jquery-toast-plugin/1.3.2/dist/jquery.toast.min.css}" />
        <link rel="stylesheet" th:href="@{/webjars/bootstrap-select/1.14.0-beta3/dist/css/bootstrap-select.min.css}" >
        <link rel="stylesheet" th:href="@{/css/main.css?v=1}" />
        <link rel="stylesheet" th:href="@{${ownCss != null ? '/css/' + ownCss : ''}}" />
    </head>
    <script>
        let systemTheme = window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark';
        let theme = localStorage.getItem('bs-theme') != null ? localStorage.getItem('bs-theme') : systemTheme;
        document.documentElement.setAttribute('data-bs-theme', theme);
    </script>
    <body>
    <div class="app">
        <div th:replace="~{fragments/header :: header}"></div>

        <main class="app-main py-2 min-vh-100" style="margin-top: 62px;">
            <div class="container-lg container-fluid">
                <th:block th:insert="${appMain}"/>
            </div>
        </main>

        <div th:replace="~{fragments/footer :: footer}"></div>
    </div>
    </body>
    <script th:src="@{/webjars/bootstrap/5.3.3/js/bootstrap.bundle.min.js}"></script>
    <script th:src="@{/webjars/jquery/3.7.1/jquery.min.js}"></script>
    <script th:src="@{/webjars/jquery-toast-plugin/1.3.2/dist/jquery.toast.min.js}"></script>
    <script th:src="@{/webjars/bootstrap-select/1.14.0-beta3/dist/js/bootstrap-select.min.js}"></script>
    <script>
        $([[${activeMenuItem}]]).addClass('active');
    </script>
    <script th:inline="javascript">
        const authUser = [[${authUser}]];
        const locale = [[${#locale}]];
    </script>
    <script th:src="@{/js/messages.js?v=1}"></script>
    <script th:src="@{/js/main.js?v=1}"></script>
    <th:block th:insert="${ownScript}?: ~{}"/>
</th:block>
</html>
